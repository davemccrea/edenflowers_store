# Notebook

## Section

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
alias Edenflowers.Store.{LineItem, Order, ProductVariant}
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
order_id = ""
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
order = Ash.get!(Order, order_id)
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
product_variant =
  ProductVariant
  |> Ash.Query.load(product: :tax_rate)
  |> Ash.read_first!()
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
Ash.Changeset.for_create(LineItem, :create, %{
  order_id: order_id,
  product_variant_id: product_variant.id,
  quantity: 1,
  tax_rate: product_variant.product.tax_rate.percentage,
  unit_price: product_variant.price
})
|> Ash.create!()
```
